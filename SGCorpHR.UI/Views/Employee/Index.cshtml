
@{
	ViewBag.Title = "Index";
}

<h2>Employee Directory</h2>
<a href="/Employee/LookUp">Search By Department</a>

<div class="row">
	<table id="employees" class="table">
		<thead>
			<tr>
				<th>Last Name</th>
				<th>First Name</th>
				<th>Hire Date</th>
				<th>Manager Name</th>
				<th>Department Name</th>
				<th>Location Name</th>
				<th>Status</th>

			</tr>
		</thead>
		<tbody></tbody>
	</table>

</div>

@section Scripts {
	<script>
		var uri = '/api/EmployeeDirectory/';

		$(document).ready(function() {
			loadEmployees();
		});

		function loadEmployees() {
			$.getJSON(uri)
				.done(function(data) {
					$('#employees tbody tr').remove();

					$.each(data, function(index, employee) {
						$(createRow(employee)).appendTo($('#employees tbody'));
					});
				});
		}

		function createRow(employee) {
			return '<tr data-departmentID=' + employee.Department.DepartmentID+'><td>' + employee.LastName + '</td> <td>' + employee.FirstName + '</td> <td>' + employee.FormattedHireDate + '</td> <td>' + employee.ManagerName + '</td> <td>' + employee.Department.DepartmentName + '</td> <td>' + employee.State + '</td> <td>' + employee.Status + '</td> </tr>';
		}
	</script>
}